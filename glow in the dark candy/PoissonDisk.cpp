#include "PoissonDisk.h"


const float PoissonDisk::disk[256] =
{
	-0.8630313f, -0.1521864f,
	-0.7392491f, -0.3324116f,
	-0.7150022f, -0.1904654f,
	-0.727591f, 0.05341053f,
	-0.8953289f, -0.3519956f,
	-0.9578828f, 0.06913653f,
	-0.5409837f, -0.03227481f,
	-0.4894506f, -0.2334041f,
	-0.6352233f, -0.4214435f,
	-0.371246f, -0.3965355f,
	-0.3049095f, -0.1109598f,
	-0.3992256f, -0.007500801f,
	-0.5088808f, -0.4796816f,
	-0.2373718f, -0.2577474f,
	-0.09119391f, -0.248898f,
	-0.2016448f, -0.432345f,
	-0.03897892f, -0.0921846f,
	-0.2256993f, 0.1217596f,
	-0.2012618f, -0.0163622f,
	-0.07558884f, 0.2023325f,
	-0.09018974f, 0.3329858f,
	-0.3811224f, 0.2224084f,
	-0.2859632f, 0.3264832f,
	-0.01551657f, 0.07299248f,
	-0.200554f, 0.4808477f,
	0.04295947f, 0.4326525f,
	0.1333737f, 0.2432401f,
	-0.07732938f, 0.5892844f,
	-0.4209675f, 0.4053096f,
	-0.5145916f, 0.2618101f,
	-0.5244169f, 0.1040565f,
	-0.6407617f, 0.2182629f,
	0.1258275f, -0.3665465f,
	0.008559152f, -0.4786259f,
	0.09972563f, -0.1666076f,
	-0.4428422f, -0.5975246f,
	-0.2837658f, -0.6142353f,
	-0.6234828f, -0.740164f,
	-0.4203444f, -0.7440521f,
	-0.5075185f, -0.8407313f,
	-0.6998097f, -0.6148773f,
	-0.3139541f, -0.8194152f,
	-0.8143871f, 0.2118135f,
	-0.1249479f, -0.638709f,
	-0.2044634f, -0.7443084f,
	-0.560088f, 0.3930952f,
	-0.9779791f, -0.0691167f,
	-0.834778f, -0.5046299f,
	0.083381f, -0.6224031f,
	0.1804659f, -0.4981129f,
	0.3008444f, 0.1782901f,
	0.1760389f, 0.06650381f,
	0.1861663f, 0.3900258f,
	0.3653187f, 0.2926278f,
	0.2896215f, -0.05743611f,
	0.2745509f, -0.258327f,
	0.07600879f, 0.6068367f,
	0.2468282f, 0.5454578f,
	0.3550265f, 0.4513035f,
	0.0127722f, -0.7367186f,
	0.2549005f, 0.728087f,
	0.4003128f, 0.7183568f,
	0.4232032f, 0.5653558f,
	0.4892765f, 0.4291573f,
	0.4428031f, 0.173689f,
	0.5304437f, 0.2727221f,
	0.3836725f, 0.03413503f,
	0.0792324f, -0.03494857f,
	0.04357545f, 0.8456107f,
	-0.1177737f, 0.7755733f,
	0.118234f, 0.7356659f,
	0.1661215f, 0.9543953f,
	0.3366963f, 0.8577033f,
	0.5812293f, 0.5556455f,
	0.4987586f, 0.8267458f,
	-0.8239645f, 0.3873025f,
	-0.9366457f, 0.2575819f,
	-0.8538894f, -0.01791366f,
	0.3192626f, -0.4676531f,
	0.245445f, -0.6636422f,
	0.3677585f, -0.6143333f,
	0.5431509f, -0.06931172f,
	0.4462693f, -0.166072f,
	-0.5717278f, 0.534103f,
	-0.3264976f, 0.6261121f,
	-0.1564897f, -0.888246f,
	0.1826035f, -0.8041856f,
	0.6179266f, -0.2384809f,
	0.7267704f, 0.09307391f,
	0.6993955f, -0.1358481f,
	0.5238148f, 0.06850522f,
	0.6856607f, 0.2230148f,
	0.8689307f, 0.185912f,
	0.6966028f, 0.3538477f,
	0.9114491f, 0.3517675f,
	0.7826359f, 0.4609302f,
	0.4748189f, -0.3800552f,
	0.7159502f, 0.5742934f,
	-0.1151211f, 0.9475809f,
	0.01668463f, 0.9922539f,
	0.8345495f, -0.06116712f,
	0.9844953f, 0.08210862f,
	-0.7336143f, 0.5669192f,
	-0.4619029f, 0.6737206f,
	-0.4833624f, 0.8324885f,
	-0.2729544f, 0.7693163f,
	-0.6120465f, -0.2818842f,
	-0.6451667f, 0.6826847f,
	-0.7009112f, 0.4311874f,
	0.8367668f, -0.2129405f,
	0.7308869f, -0.4051109f,
	0.06347614f, -0.8624998f,
	-0.298078f, -0.9501794f,
	-0.4329154f, 0.5418246f,
	0.8552628f, -0.4834143f,
	0.9305023f, -0.3473163f,
	0.5560994f, -0.502549f,
	0.7544112f, -0.6009519f,
	0.9618218f, -0.1081761f,
	0.5258363f, -0.6818624f,
	0.3551896f, -0.8850259f,
	0.391077f, -0.7552574f,
	0.6453997f, -0.7443177f,
	0.6102576f, 0.714994f,
	0.5021595f, -0.8578929f,
	0.2194481f, -0.9452668f,
	0.03533189f, -0.9955625f,
	-0.3583721f, 0.921888f
};


PoissonDisk::PoissonDisk()
{
	npoints = 128;

	glGenVertexArrays(1, &va);
	glGenBuffers(1, &vb);

	glBindVertexArray(va);
	glBindBuffer(GL_ARRAY_BUFFER, vb);
	glBufferData(GL_ARRAY_BUFFER, sizeof(float)*npoints*2, disk, GL_STATIC_DRAW);
	glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, 0);
	glEnableVertexAttribArray(0);
}


PoissonDisk::~PoissonDisk()
{
	glDeleteVertexArrays(1, &va);
	glDeleteBuffers(GL_ARRAY_BUFFER, &vb);
}


void PoissonDisk::Draw()
{
	glBindVertexArray(va);
	glDrawArrays(GL_POINTS, 0, npoints);
}
